アーキテクチャ選択理由
フロントエンド設計
/app
├── (auth)          # 認証関連ページ
├── recipes         # レシピ関連ページ
├── prefectures     # 都道府県別ページ
├── users           # ユーザー関連ページ
└── components      # 共通コンポーネント
    ├── ui          # shadcn/ui基盤コンポーネント
    ├── recipes     # レシピ専用コンポーネント
    └── layout      # レイアウトコンポーネント
Convexスキーマ設計パターン

正規化vs非正規化: 検索性能重視で適度な非正規化
インデックス戦略: 都道府県、カテゴリ、人気度での複合インデックス
リアルタイム最適化: useQueryでの自動キャッシュ・再取得

画像管理戦略

Convex File Storage: メイン画像、手順画像の管理
Cloudinary: 自動最適化、WebP変換、レスポンシブ対応
画像品質基準: 最大2MB、推奨アスペクト比4:3

実装パターン
レシピ投稿フロー
typescript// 1. 画像アップロード → Convex Storage
// 2. レシピ基本情報保存 → recipes テーブル
// 3. 材料・手順保存 → 関連テーブル
// 4. リアルタイム反映 → 全ユーザーに通知
検索・フィルター実装
typescript// Convex検索インデックス活用
// 都道府県 × カテゴリ × 季節での複合検索
// ページネーション対応
認証フロー
typescript// Convex Auth使用
// Google OAuth推奨（高齢者でも使いやすい）
// メール認証はバックアップ手段
パフォーマンス最適化
画像最適化

Next.js Image コンポーネント使用
priority設定でLCPスコア改善
placeholder="blur"でCLS対策

SEO対策

動的メタデータ生成
構造化データ（レシピスキーマ）
サイトマップ自動生成

避けるべきパターン
❌ アンチパターン

巨大なコンポーネント: 200行超えは分割必須
props drilling: Context API適切使用
useEffect乱用: Convexのリアクティブ性活用
型定義なし: 必ずTypeScript型定義

❌ データ設計アンチパターン

過度な正規化: パフォーマンス劣化
インデックス不足: 検索性能低下
ファイルサイズ無制限: ストレージコスト増大
